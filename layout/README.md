# 布局

布局是一套用于计算组件位置和大小的规则，相比手动编码控制组件的位置和大小，布局具有如下优势：

* **低成本：**无需手动编写复杂的代码去实现常见的布局。
* **灵活度高：**只需简单设置几个布局参数即可改变组件的排列方向、间距和大小等。

LCUI 的布局与网页中的 CSS 布局是相似的，我们假定你已经熟练掌握 CSS 布局技术，本章节将简单介绍 LCUI 布局与网页的差异，并通过示例代码的形式来展现常见布局在 LCUI 中的实现方式，相信你在看了这些内容后能够快速上手。

{% hint style="info" %}
如果你对 CSS 布局技术还不熟悉，我们建议你阅读 MDN 上的文档：《[CSS 布局 - 学习 Web 开发 \| MDN](https://developer.mozilla.org/zh-CN/docs/Learn/CSS/CSS_layout)》
{% endhint %}

### 尺寸规则

尺寸规则影响到组件的布局规则和布局后的实际尺寸，也会影响到子组件的尺寸规则，它在组件的样式计算和布局阶段会被重新计算。以下是这些规则的作用说明：

* **FIXED：**固定。表示尺寸属性可在布局前直接计算出确切的值，除了设置 100px 这类值外，父组件的尺寸规则是固定时也会采用该规则，因为，即便子组件的尺寸是百分比值或 auto，在父组件尺寸已知的情况下也能直接计算出来。
* **FILL：**填充。组件的尺寸将填满父组件内容区域。大多数情况下该规则都会转换为固定，因为根组件的尺寸规则必定是固定。
* **PERCENT：**百分比。表示在计算尺寸属性的值之前必须先计算出父组件尺寸的实际值，然后再按照百分比计算实际值。在父组件尺寸规则不为固定且尺寸属性为 50% 这类值时，会采用百分比规则。
* **FIT\_CONTENT：**适应内容。表示在布局完后使用内容区域的尺寸作为实际值。该规则常用于组件的高度，因为在大多数情况下宽度是固定的，由内容撑开高度。当组件采用绝对定位或者显示方式为内联块（inline-block）时，它的宽高都会采用该规则。

### 布局规则

布局规则在布局前由组件的定位方式、尺寸规则和初始布局规则计算而来，它告诉布局引擎在布局前如何确定最大内容宽度、在布局后如何计算组件实际尺寸。以下是这些规则的作用说明：

* **AUTO**：自动。这是初始规则，由布局引擎根据组件的显示方式和尺寸规则来选择合适的布局规则。
* **MAX\_CONTENT**：最大内容。在布局时尽可能扩大尺寸以呈现更多的内容。当尺寸规则都不为固定时会采用此布局规则。
* **FIXED\_WIDTH：**固定宽度。在布局时将组件内容区域宽度作为最大宽度，排列的每行子组件都不会超出该宽度。当宽度的尺寸规则是固定时会采用该规则。
* **FIXED\_HEIGHT**：固定高度。与固定宽度相似，但它在正常流布局下不会影响子组件的排列位置。
* **FIXED**：固定。当组件的宽高属性的尺寸规则都是固定时采用该规则。

### 主动与被动布局



### 待办事项

**重新设计布局引擎**

现有的布局引擎是与 LCUI 的组件系统绑定在一起的，而且布局规则的处理流程也比较复杂，为了降低维护成本，简化布局流程，我们应该重新设计布局引擎，使它能够作为一个独立的项目被用于其他项目。可供参考的同类案例有：[https://github.com/facebook/yoga](https://github.com/facebook/yoga)



